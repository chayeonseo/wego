<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{public/sideHeader}">
<head>
    <meta charset="UTF-8">
    <meta th:name="${_csrf.parameterName}" th:content="${_csrf.token}">
    <title>메뉴</title>
    <link rel="stylesheet" th:href="@{/css/main/menu.css}" href="../../static/css/main/menu.css">
    <script th:src="@{/js/main/menu.js}" src="../../static/js/main/menu.js" defer></script>
    <script src="https://kit.fontawesome.com/497c77bb05.js" crossorigin="anonymous"></script><!--버튼 이모티콘-->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script> <!-- sortable.js - 메뉴드래그드랍 -->
</head>

<body layout:fragment="main">
    <div class="main-container">
        <!--메뉴 수정 모달 창 : js로 안 내용 변경 현재 메뉴 개별 수정 창-->
        <div class="menu-editing-container" id="menu-modify-modal">
            <div class="menu-editing-content">
                <div class="menu-editing-header">
                    <button class="menu-cancel-btn" id="menu-modify-cancel">X</button>
                    <span class="menu-header-title" >메뉴 수정</span>
                </div>
                <hr>
                <div class="menu-editing-body">
                    <div class="menu-editing">
                        <img class="menu-editing-img" th:src="@{image/public/delivery.jpg}" alt="alal">
                        <div class="menu-editing-div">
                            <input type="text" class="menu-title" value="돈까스" disabled>
                            <input type="text" class="menu-con" value="1000원" disabled>
                            <select class="category-dropdown" id="category-modify-dropdown" disabled>
                            </select>
                        </div>
                        <div class="menu-editing-modify">
                            <button type="button" class="menu-editing-btn">수정</button> <!--수정을 누르면 input disabled 해제, 이미지 수정 가능-->
                        </div>
                        <input id="menuId" type="hidden" value="">
                    </div>
                    <select class="menu-sold-select">
                        <option class="menu-status-btn" value="0">비활성화</option>
                        <option class="menu-status-btn" value="1">활성화</option>
                        <option class="menu-status-btn" value="2">품절</option>
                    </select>

                    <hr class="hr">
                    <div class="menu-editing-con">
                        <span>구성 및 설명</span>
                        <button type="button" class="menu-editing-btn">수정</button>
                        <label><input type="text" class="editing-con" disabled></label>
                    </div>
                    <hr class="hr">
                    <div class="menu-editing-opt-con">
                        <span>옵션</span>
                        <button type="button" class="menu-option-join-btn">추가</button>
                        <div class="menu-opt">
                            <select class="option-dropdown" id="option-modify-dropdown">
                            </select>
                        </div>
                    </div>
                    <div class="join-option-container" id="join-option-modify-container">
                    </div>
                    <hr class="hr">

                    <div class="div-modify-btn">
                        <button type="button" class="modify-btn">적용</button>
                    </div>
                </div>
            </div>
        </div>

    <!--    메뉴 추가 모달창 -->
            <div class="menu-editing-container" id="menu-add-modal">
                <div class="menu-editing-content">
                    <div class="menu-editing-header">
                        <button class="menu-cancel-btn" id="menu-add-cancel">X</button>
                        <span class="menu-header-title">메뉴 추가</span>
                    </div>
                    <hr>
                    <div class="menu-editing-body">
                        <div class="menu-editing">
                            <img class="menu-editing-img" th:src="@{image/public/delivery.jpg}" alt="alal">
                            <div class="menu-editing-div">
                                <input type="text" class="menu-title" placeholder="이름">
                                <input type="text" class="menu-con" placeholder="가격">
<!--                                <input type="text" class="menu-people" value="몇인분" disabled>-->
<!--                                <button type="button">메뉴카테고리</button>-->
                                <select class="category-dropdown" id="category-add-dropdown">
<!--                                    fetch로 업데이트-->
                                </select>
                            </div>
                        </div>
                        <hr class="hr">
                        <div class="menu-editing-con">
                            <span>구성 및 설명</span>
                            <label><input type="text" class="editing-con"></label>
                        </div>
                        <hr class="hr">
                        <div class="menu-editing-con">
                            <span>옵션</span>
                            <div class="menu-opt" id="menuAddOpt">
                                <select class="option-dropdown" id="option-add-dropdown">
                                </select>
                            </div>
                        </div>
                        <div class="join-option-container" id="join-option-add-container">
                        </div>
                        <hr class="hr">
                        <div class="option-add-btn">
                            <button type="button" class="option-add-btn">추가</button>
                        </div>
                    </div>
                </div>
            </div>

        <!--메뉴 카테고리 수정 모달-->


        <div class="menu-category-container">
            <div class="category-content">
                <div class="category-header">
                    <button class="cancel-btn">X</button>
                    <input type="hidden" id="modify-categoryId" value="">
                    <!--                <input class="option-header-opt" value="최대 1개 최소 1개">-->
                </div>
                <hr>
                <!--            <div class="option-category-add">-->
                <!--                <button class="add-btn">옵션 추가</button>-->
                <!--            </div>-->
                <div class="option-header-container">
                    <button class="option-header-btn">수정</button>
                    <input class="option-header-title" value="옵션2" disabled>
                </div>
                <hr>
                <div class="option-editing-body">

                </div>
                <div class="modify-btn-div">
                    <button type="button" class="apply-btn">변경사항 저장</button>
                    <button type="button" class="delete-btn">옵션 그룹 삭제</button>
                </div>
            </div>
        </div>

    <!--    메뉴     -->

        <div class="btn-div">
            <button type="button">메뉴 추가</button>
            <button type="button">카테고리 추가</button>
            <input type="text" class="search-input" placeholder="검색창">
        </div>
        <br>
        <div class="con" th:each="category:${categorys}">
            <input type="hidden" class="menu-categoryId" th:value="${category.menuCategoryId}">
            <div class="con-title">
                <span th:text="${category.menuCategoryName}">메뉴</span>
                <button type="button" class="category-modify-btn"><i class="fa-solid fa-pencil"></i>변경</button>
                <!--                    <button type="button"><i class="fa-solid fa-pencil"></i>변경</button>-->
            </div>
            <hr>
            <ul class="menu-ul">
                <!--        드랍앤 드래그 js 예정        -->
                <li class="menu-li" th:each="menu : ${category.menus}">
                    <div class="con-info">
                        <div class="con-drop">
                            <i class="handle fa-solid fa-bars fa-2x"></i>
                        </div>
                        <div class="info">
                            <input class="menuId" type="hidden" th:value="${menu.menuId}">
                            <div class="menu-name" th:text="${menu.menuName}">닭꼬치</div>
                            <div class="menu-content" th:text="${menu.menuContent}">비싸지만 맛있음</div>
                            <div class="menu-price" th:text="${#numbers.formatInteger(menu.menuPrice, 0, 'COMMA')} + '원'">1000원</div>
                        </div>
                    </div>
                    <th:block th:if="${menu.menuImgs[0].menuImgThm != null}">
                        <img class="menu-img" th:src="'http://' + ${menu.menuImgs[0].menuImgThm}" alt="상품 사진">
                    </th:block>
                    <!--                        <div th:text="${menu.menuImgs[0].menuImgThm}"></div>-->
                </li>
            </ul>
        </div>
    </div>
</body>
</html>